function PaginationWithSearch(n, t) { RPS(n), SP(n), $("#" + n.ContentID).css("height", $("#" + n.ContentID).height()) } function RPS(n) { $("#" + n.ContentID + "PaginationNavBar").remove(), $("#" + n.ContentID).children().each(function (n, t) { $(t).removeClass("ItmActive"), $(t).removeClass("data-Index"), $(t).removeClass("HdnPgItm") }) } function SP(n) { $("#" + n.ContentID).attr("unselectable", "on"), $("#" + n.ContentID).attr("onselectstart", "return false"), $("#" + n.ContentID).attr("onmousedown", "return false"), $("#" + n.ContentID).addClass("Unselect"); var t = n.SearchBoxId; if (isNotNull(t)) { $("#" + t).attr("onkeyup", "PaginationWithSearch({ContentID:'" + n.ContentID + "',ItemVisiblePerPage:" + n.ItemVisiblePerPage + ",ItemsInPaginationNav:" + n.ItemsInPaginationNav + ",SearchBoxId:'" + n.SearchBoxId + "'},event)"); var e = $("#" + n.SearchBoxId).val().toLowerCase().trim(); isNotNull(e) ? $("#" + n.ContentID).children().each(function (n, t) { var a = $(t).attr("data-SearchTag"); isNotNull(a) && a.indexOf(e) > -1 && $(t).addClass("ItmActive") }) : $("#" + n.ContentID).children().each(function (n, t) { $(t).addClass("ItmActive") }) } else $("#" + n.ContentID).children().each(function (n, t) { $(t).addClass("ItmActive") }); Pagination({ ContentID: n.ContentID, ItemVisiblePerPage: n.ItemVisiblePerPage, ItemsInPaginationNav: n.ItemsInPaginationNav }) } function Pagination(n) { $("<div id=" + n.ContentID + 'PaginationNavBar class="Unselect" unselectable="on" onselectstart="return false; " onmousedown="return false;" ><div>').insertAfter("#" + n.ContentID); var t = n.ItemVisiblePerPage, e = n.ItemsInPaginationNav, a = 0, s = 0, i = 0, l = $("#" + n.ContentID).children(".ItmActive").length; t < l ? (s = t, i = Math.ceil(l / t)) : (s = l, i = 1), a = e > i ? i : e, $("#" + n.ContentID).children().each(function (n, t) { $(t).removeAttr("data-Index") }), $("#" + n.ContentID).children(".ItmActive").each(function (n, t) { s < n + 1 && $(t).addClass("HdnPgItm"), $(t).attr("data-Index", n + 1) }), $("#" + n.ContentID).children(":not(.ItmActive)").each(function (n, t) { $(t).addClass("HdnPgItm") }), $("#" + n.ContentID + "PaginationNavBar").empty(), $("#" + n.ContentID + "PaginationNavBar").append('<span class="DfltPgnBtn PgnBtnDsbld PgnPrevBtn" onclick="PgnPreBtn(event,' + l + "," + s + "," + i + "," + a + ')">Previous</span>'), $("#" + n.ContentID + "PaginationNavBar").append('<span data-Index=1 onclick="ChangePage(event,' + l + "," + s + "," + i + "," + a + ')" class="PgnActive PgnBtn">1</span>'); for (var r = 2; r <= i; r++)r > a ? $("#" + n.ContentID + "PaginationNavBar").append("<span data-Index=" + r + ' onclick="ChangePage(event,' + l + "," + s + "," + i + "," + a + ')" class="HdnPgItm PgnBtn">' + r + "</span>") : $("#" + n.ContentID + "PaginationNavBar").append("<span data-Index=" + r + ' onclick="ChangePage(event,' + l + "," + s + "," + i + "," + a + ')" class="PgnBtn">' + r + "</span>"); 1 === i ? $("#" + n.ContentID + "PaginationNavBar").append('<span class="DfltPgnBtn PgnBtnDsbld PgnNxtBtn" onclick="PgnNxtBtn(event,' + l + "," + s + "," + i + "," + a + ')">Next</span>') : $("#" + n.ContentID + "PaginationNavBar").append('<span class="DfltPgnBtn PgnNxtBtn" onclick="PgnNxtBtn(event,' + l + "," + s + "," + i + "," + a + ')">Next</span>') } function ChangePage(n, t, e, a, s) { var i = n.target; $(i).siblings().removeClass("PgnActive"), $(i).addClass("PgnActive"), SetPageReadyFor(i, $(i).attr("data-Index"), e, a) } function SetPageReadyFor(n, t, e, a) { var s = e * (t - 1) + 1, i = s + (e - 1); $(n).parent().prev().children().addClass("HdnPgItm"), $(n).parent().prev().children().each(function (n, t) { var e = parseInt($(t).attr("data-Index")); e <= i && e >= s && $(this).removeClass("HdnPgItm") }), EnableOrDisableNextAndPrev(n, t, a) } function PgnNxtBtn(n, t, e, a, s) { var i = n.target; if (!$(i).hasClass("PgnBtnDsbld")) { var l = parseInt($(i).siblings(".PgnActive").attr("data-Index")) + 1; if ($(i).siblings().prev(".DfltPgnBtn").removeClass("PgnBtnDsbld"), $(i).siblings("[data-Index=" + l + "]").hasClass("HdnPgItm")) SetNavBar(i, l, l + (s - 1)); RefreshNav(i, l, e, a) } } function PgnPreBtn(n, t, e, a, s) { var i = n.target; if (!$(i).hasClass("PgnBtnDsbld")) { var l = parseInt($(i).siblings(".PgnActive").attr("data-Index")) - 1; if ($(i).siblings("[data-Index=" + l + "]").hasClass("HdnPgItm")) { SetNavBar(i, 1 === s ? l : l - s, l) } RefreshNav(i, l, e, a) } } function RefreshNav(n, t, e, a) { $(n).siblings().next(".DfltPgnBtn").removeClass("PgnBtnDsbld"), $(n).siblings().removeClass("PgnActive"), $(n).siblings("[data-Index=" + t + "]").addClass("PgnActive"), SetPageReadyFor(n, t, e, a) } function SetNavBar(n, t, e) { $(n).parent().children("span:not(.DfltPgnBtn)").addClass("HdnPgItm"), $(n).parent().children("span:not(.DfltPgnBtn)").each(function (n, a) { n + 1 <= e && n + 1 >= t && $(this).removeClass("HdnPgItm") }) } function EnableOrDisableNextAndPrev(n, t, e) { 1 === parseInt(t) ? 1 === $(n).siblings().prev(".DfltPgnBtn").length ? $(n).siblings().prev(".DfltPgnBtn").addClass("PgnBtnDsbld") : $(n).prev(".DfltPgnBtn").addClass("PgnBtnDsbld") : $(n).siblings().prev(".DfltPgnBtn").removeClass("PgnBtnDsbld"), e === parseInt(t) ? 1 === $(n).siblings().next(".DfltPgnBtn").length ? $(n).siblings().next(".DfltPgnBtn").addClass("PgnBtnDsbld") : $(n).next(".DfltPgnBtn").addClass("PgnBtnDsbld") : $(n).siblings().next(".DfltPgnBtn").removeClass("PgnBtnDsbld") } function isNotNull(n) { return void 0 !== n && null !== n && "" !== n }